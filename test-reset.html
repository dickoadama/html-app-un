<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Réinitialisation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/new-style.css">
</head>
<body>
    <div class="container" style="padding: 50px;">
        <h1>Test de Réinitialisation des Données</h1>
        <p>Cette page permet de tester la fonctionnalité de réinitialisation complète des données.</p>
        
        <button id="testResetBtn" class="btn btn-danger" style="margin-top: 20px;">
            <i class="fas fa-exclamation-triangle"></i> Test Réinitialisation
        </button>
        
        <div id="result" style="margin-top: 20px; padding: 15px; border-radius: 5px;"></div>
    </div>

    <script src="js/database.js"></script>
    <script>
        // Attendre que le DOM soit chargé
        document.addEventListener('DOMContentLoaded', function() {
            const testBtn = document.getElementById('testResetBtn');
            const resultDiv = document.getElementById('result');
            
            // Initialiser la base de données
            const database = new UNDatabase();
            
            // Afficher les statistiques actuelles
            function displayStats() {
                const stats = database.getStatistics();
                resultDiv.innerHTML = `
                    <h3>Statistiques actuelles :</h3>
                    <p>Membres : ${stats.totalMembers}</p>
                    <p>Membres Actifs : ${stats.activeMembers}</p>
                    <p>Événements : ${stats.totalEvents}</p>
                    <p>Événements à venir : ${stats.upcomingEvents}</p>
                    <p>Fonds disponibles : ${stats.totalFinances} FCFA</p>
                    <p>Utilisateurs : ${stats.totalUsers}</p>
                `;
            }
            
            // Afficher les statistiques initiales
            displayStats();
            
            // Gérer le clic sur le bouton de test
            testBtn.addEventListener('click', function() {
                if (confirm('Êtes-vous sûr de vouloir réinitialiser toutes les données ? Cette action est irréversible.')) {
                    try {
                        // Appeler la méthode de réinitialisation
                        database.resetAllData();
                        
                        // Afficher un message de succès
                        resultDiv.innerHTML = `
                            <div style="background-color: #d4edda; color: #155724; padding: 15px; border-radius: 5px; border: 1px solid #c3e6cb;">
                                <h3><i class="fas fa-check-circle"></i> Succès</h3>
                                <p>Toutes les données ont été réinitialisées avec succès !</p>
                            </div>
                        `;
                        
                        // Afficher les nouvelles statistiques
                        setTimeout(displayStats, 1000);
                    } catch (error) {
                        console.error('Erreur lors de la réinitialisation des données:', error);
                        resultDiv.innerHTML = `
                            <div style="background-color: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; border: 1px solid #f5c6cb;">
                                <h3><i class="fas fa-exclamation-circle"></i> Erreur</h3>
                                <p>Erreur lors de la réinitialisation des données : ${error.message}</p>
                            </div>
                        `;
                    }
                }
            });
        });
    </script>
</body>
</html>